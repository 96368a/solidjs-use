import{u as r,q as w}from"./index-6db96aa9.js";import{u as c}from"./index-7c4ad678.js";function k(n,u,p={}){const{window:e=w,ignore:f=[],capture:h=!0,detectIframe:P=!1}=p;if(!e)return;let s=!0,a;const l=t=>f.some(o=>{if(typeof o=="string")return Array.from(e.document.querySelectorAll(o)).some(d=>d===t.target||t.composedPath().includes(d));const i=r(o);return i&&(t.target===i||t.composedPath().includes(i))}),m=t=>{e.clearTimeout(a);const o=r(n);if(!(!o||o===t.target||t.composedPath().includes(o))){if(t.detail===0&&(s=!l(t)),!s){s=!0;return}u(t)}},E=[c(e,"click",m,{passive:!0,capture:h}),c(e,"pointerdown",t=>{const o=r(n);o&&(s=!t.composedPath().includes(o)&&!l(t))},{passive:!0}),c(e,"pointerup",t=>{if(t.button===0){const o=t.composedPath();t.composedPath=()=>o,a=e.setTimeout(()=>m(t),50)}},{passive:!0}),P&&c(e,"blur",t=>{const o=r(n);e.document.activeElement?.tagName==="IFRAME"&&!o?.contains(e.document.activeElement)&&u(t)})].filter(Boolean);return()=>E.forEach(t=>t())}export{k as o};
